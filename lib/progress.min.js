(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Progress=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports={createLink:function(href,attributes){var head=document.head||document.getElementsByTagName("head")[0];var link=document.createElement("link");link.href=href;link.rel="stylesheet";for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue}var value=attributes[key];link.setAttribute("data-"+key,value)}head.appendChild(link)},createStyle:function(cssText,attributes){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue}var value=attributes[key];style.setAttribute("data-"+key,value)}if(style.sheet){style.innerHTML=cssText;style.sheet.cssText=cssText;head.appendChild(style)}else if(style.styleSheet){head.appendChild(style);style.styleSheet.cssText=cssText}else{style.appendChild(document.createTextNode(cssText));head.appendChild(style)}}}},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rgbToHex=rgbToHex;exports.hexToRgb=hexToRgb;function componentToHex(c){var hex=c.toString(16);return hex.length===1?"0"+hex:hex}function rgbToHex(rgb){var arr=rgb.match(/\((.*)\)/)[1].split(",");var r=+arr[0];var g=+arr[1];var b=+arr[2];return"#"+componentToHex(r)+componentToHex(g)+componentToHex(b)}function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;var h=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return result?[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)].join(","):null}},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};exports.default=extend;function extend(source){for(var _len=arguments.length,list=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){list[_key-1]=arguments[_key]}if(!list||!source||(typeof source==="undefined"?"undefined":_typeof(source))!=="object"){return{}}list.forEach(function(obj){Object.keys(obj).forEach(function(key){if(Object.prototype.toString.call(obj[key])==="[object Object]"){source[key]=extend({},source[key],obj[key])}else{source[key]=obj[key]}})});return source}},{}],4:[function(require,module,exports){"use strict";module.exports=require("./progress").default},{"./progress":6}],5:[function(require,module,exports){var css=".progress-wrapper {\n  left: 0;\n  right: 0;\n  z-index: 999;\n  height: 5px;\n}\n.progress-bar {\n  width: 0;\n  position: relative;\n  transition: all .3s;\n}\n.progress-main {\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n.progress-bar,\n.progress-bar-inner {\n  display: block;\n  height: 2px;\n  -moz-transition: all .3s;\n  -o-transition: all .3s;\n}\n.progress-bar-inner {\n  position: absolute;\n  top: 1px;\n  right: 0;\n  width: 100px;\n  transition: all .3s;\n}\n.progress-circle {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 15px;\n  height: 15px;\n  border: 2px solid transparent;\n  border-radius: 50%;\n  -webkit-animation: spin .4s linear infinite;\n  -moz-animation: spin .4s linear infinite;\n  -o-animation: spin .4s linear infinite;\n  animation: spin .4s linear infinite;\n  -moz-transition: border .3s;\n  -o-transition: border .3s;\n  transition: border .3s;\n}\n@-webkit-keyframes spin {\n  0% {\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-moz-keyframes spin {\n  0% {\n    -moz-transform: rotate(0);\n    transform: rotate(0);\n  }\n\n  100% {\n    -moz-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@-o-keyframes spin {\n  0% {\n    -o-transform: rotate(0);\n    transform: rotate(0);\n  }\n\n  100% {\n    -o-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  0% {\n    -webkit-transform: rotate(0);\n    -moz-transform: rotate(0);\n    -o-transform: rotate(0);\n    transform: rotate(0);\n  }\n\n  100% {\n    -webkit-transform: rotate(360deg);\n    -moz-transform: rotate(360deg);\n    -o-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";require("browserify-css").createStyle(css,{href:"src/progress.css"});module.exports=css},{"browserify-css":1}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _extend=require("./extend");var _extend2=_interopRequireDefault(_extend);var _color=require("./color");var color=_interopRequireWildcard(_color);require("./progress.css");function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var body=document.querySelector("body");var defaultOption={element:body,position:"top",color:"rgb(2, 141, 192)"};var linear=function linear(time){return time*2};var instanceCount=0;var Progress=function(){function Progress(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Progress);instanceCount++;this.options=(0,_extend2.default)({},defaultOption,options);this.percent=0;this.id=instanceCount;this._intervalHandler=null;this.status="waiting";this.callbacks={}}_createClass(Progress,[{key:"init",value:function init(){var position="fixed";var display="block";var top=0;var bottom="auto";var highlight="rotate(2deg) translate(0,-4px);";if(this.options.element!==body){position="absolute";display="none"}if(this.options.position==="bottom"){top="auto";bottom=0;highlight="rotate(-2deg) translate(0,1px)"}var tmpl='\n      <div class="progress-main">\n        <span class="progress-bar">\n          <span class="progress-bar-inner"></span>\n        </span>\n        <span class="progress-circle"></span>\n        <style>\n            .progress-wrapper{\n              position: '+position+";\n              top: "+top+";\n              bottom: "+bottom+";\n            }\n            .progress-main{\n              top: "+top+";\n              bottom: "+bottom+";\n            }\n            .progress-bar-inner{\n              -webkit-transform: "+highlight+";\n              -moz-transform: "+highlight+";\n              -ms-transform: "+highlight+";\n              -o-transform: "+highlight+";\n              transform: "+highlight+";\n            }\n            .progress-circle{\n              display:"+display+";\n            }\n        </style>\n      </div>\n      ";this.element=document.createElement("div");this.element.innerHTML=tmpl;this.element.className="progress-wrapper";this.setColor(this.options.color);this.options.element.appendChild(this.element)}},{key:"start",value:function start(algorithm){var _this=this;if(~["loading","prohibit"].indexOf(this.status))return this;this.init();this.status="loading";var timingFn=null;switch(algorithm){case"linear":timingFn=linear;break;default:timingFn=linear}var time=1;this._intervalHandler=setInterval(function(){if(_this.percent<98){_this.percent=timingFn(time);_this.percent=_this.percent>98?98:_this.percent;_this.set(_this.percent)}_this.trigger("progress",_this.percent);time+=1},400);this.trigger("start");return this}},{key:"stop",value:function stop(){if(this._intervalHandler){clearInterval(this._intervalHandler);this._intervalHandler=null}this.trigger("stop");return this}},{key:"set",value:function set(percent){if(this.status!=="loading"||typeof percent!=="number"||percent<0||percent>100){return this}this.percent=percent;(0,_extend2.default)(this.element.querySelector(".progress-bar").style,{width:this.percent+"%"});this.trigger("set",percent);return this}},{key:"end",value:function end(){var _this2=this;if(this.status!=="loading")return this;this.stop();this.set(100);this._autoIncrease=false;setTimeout(function(){var opacity=1;var handler=setInterval(function(){(0,_extend2.default)(_this2.element.style,{opacity:opacity});if(opacity<=0){clearInterval(handler);_this2.percent=0;_this2.status="waiting";_this2.element.parentNode.removeChild(_this2.element);_this2.trigger("end")}opacity-=.1},50)},400);return this}},{key:"setColor",value:function setColor(c){if(!c)return this;var rgb=void 0;var hex=void 0;if(c[0]==="#"){rgb=color.hexToRgb(c);hex=c}else{rgb=c.match(/\((.*)\)/)[1];hex=color.rgbToHex(c)}this.options.color=hex;(0,_extend2.default)(this.element.querySelector(".progress-bar").style,{background:hex,boxShadow:"0 0 10px 0 rgba("+rgb+", 0.5)"});(0,_extend2.default)(this.element.querySelector(".progress-bar-inner").style,{background:hex,boxShadow:"0 0 10px rgba("+rgb+",0.5)"});(0,_extend2.default)(this.element.querySelector(".progress-circle").style,{borderBottomColor:hex,borderLeftColor:hex});this.trigger("setColor",hex);return this}},{key:"on",value:function on(name,fn,context){if(!this.callbacks[name]||!this.callbacks[name].length){this.callbacks[name]=[{fn:fn,context:context||this}]}else{this.callbacks[name].push({fn:fn,context:context||this})}return this}},{key:"trigger",value:function trigger(name){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(!this.callbacks[name]||!this.callbacks[name].length)return this;this.callbacks[name].forEach(function(cb){return cb.fn.apply(cb.context,args)});return this}}]);return Progress}();exports.default=Progress},{"./color":2,"./extend":3,"./progress.css":5}]},{},[4])(4)});